<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FAQ &mdash; PyTango v7.1.0 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '7.1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyTango v7.1.0 documentation" href="index.html" />
    <link rel="prev" title="Exception Handling" href="exception.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="exception.html" title="Exception Handling"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyTango v7.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">FAQ</a><ul>
<li><a class="reference external" href="#where-are-the-usual-bjam-files">Where are the usual bjam files?</a></li>
<li><a class="reference external" href="#i-got-a-libbost-python-error-when-i-try-to-import-pytango-module">I got a libbost_python error when I try to import PyTango module</a></li>
<li><a class="reference external" href="#my-python-code-uses-pytango-3-0-4-api-how-do-i-change-to-7-0-0-api">My python code uses PyTango 3.0.4 API. How do I change to 7.0.0 API?</a><ul>
<li><a class="reference external" href="#general-rule-of-thumb-for-data-types">General rule of thumb for data types</a></li>
<li><a class="reference external" href="#server">Server</a></li>
<li><a class="reference external" href="#general">General</a></li>
<li><a class="reference external" href="#optional">Optional</a><ul>
<li><a class="reference external" href="#server-side-v3-to-v4-upgrade">Server side V3 to V4 upgrade</a></li>
<li><a class="reference external" href="#improved-server-side-image-attribute-read-api">Improved server side image attribute read API</a></li>
<li><a class="reference external" href="#improved-server-side-attribute-write-api">Improved server side attribute write API</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#why-is-there-a-wstrict-prototypes-warning-when-i-compile-pytango">Why is there a &#8220;-Wstrict-prototypes&#8221; warning when I compile PyTango?</a></li>
<li><a class="reference external" href="#why-are-there-so-many-warnings-when-generating-the-documentation">Why are there so many warnings when generating the documentation?</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="exception.html"
                                  title="previous chapter">Exception Handling</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/faq.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h1>
<p>Answers to general Tango questions can be found at <a class="reference external" href="http://www.tango-controls.org/tutorials">http://www.tango-controls.org/tutorials</a></p>
<p>Please also check <a class="reference external" href="http://www.tango-controls.org/howtos">http://www.tango-controls.org/howtos</a> for a list of Tango howtos</p>
<div class="section" id="where-are-the-usual-bjam-files">
<h2>Where are the usual bjam files?<a class="headerlink" href="#where-are-the-usual-bjam-files" title="Permalink to this headline">¶</a></h2>
<p>Starting from PyTango 7.0.0 the prefered way to build PyTango is using the standard
python distutils package. This means that:</p>
<ul class="simple">
<li>you do NOT have to install the additional bjam package</li>
<li>you do NOT have to change 3 configuration files</li>
<li>you do NOT need to have 2Gb of RAM to compile PyTango.</li>
</ul>
<p>Please check the compilation chapter for details on how to build PyTango.</p>
</div>
<div class="section" id="i-got-a-libbost-python-error-when-i-try-to-import-pytango-module">
<h2>I got a libbost_python error when I try to import PyTango module<a class="headerlink" href="#i-got-a-libbost-python-error-when-i-try-to-import-pytango-module" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>doing:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">import</span> <span class="nn">PyTango</span>
<span class="go">ImportError: libboost_python-gcc43-mt-1_38.so.1.38.0: cannot open shared object file: No such file or directory</span>
</pre></div>
</div>
</dd>
</dl>
<p>You must check that you have the correct boost python installed on your computer.
To see which boost python file PyTango needs type:</p>
<div class="highlight-python"><pre>$ ldd /usr/lib/python2.5/site-packages/PyTango/_PyTango.so
linux-vdso.so.1 =&gt;  (0x00007fff48bfe000)
libtango.so.7 =&gt; /home/homer/local/lib/libtango.so.7 (0x00007f393fabb000)
liblog4tango.so.4 =&gt; /home/homer/local/lib/liblog4tango.so.4 (0x00007f393f8a0000)
**libboost_python-gcc43-mt-1_38.so.1.38.0 =&gt; not found**
libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x00007f393f65e000)
librt.so.1 =&gt; /lib/librt.so.1 (0x00007f393f455000)
libdl.so.2 =&gt; /lib/libdl.so.2 (0x00007f393f251000)
libomniORB4.so.1 =&gt; /usr/local/lib/libomniORB4.so.1 (0x00007f393ee99000)
libomniDynamic4.so.1 =&gt; /usr/local/lib/libomniDynamic4.so.1 (0x00007f393e997000)
libomnithread.so.3 =&gt; /usr/local/lib/libomnithread.so.3 (0x00007f393e790000)
libCOS4.so.1 =&gt; /usr/local/lib/libCOS4.so.1 (0x00007f393e359000)
libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x00007f393e140000)
libc.so.6 =&gt; /lib/libc.so.6 (0x00007f393ddce000)
libstdc++.so.6 =&gt; /usr/lib/libstdc++.so.6 (0x00007f393dac1000)
libm.so.6 =&gt; /lib/libm.so.6 (0x00007f393d83b000)
/lib64/ld-linux-x86-64.so.2 (0x00007f3940a4c000)</pre>
</div>
</div>
<div class="section" id="my-python-code-uses-pytango-3-0-4-api-how-do-i-change-to-7-0-0-api">
<h2>My python code uses PyTango 3.0.4 API. How do I change to 7.0.0 API?<a class="headerlink" href="#my-python-code-uses-pytango-3-0-4-api-how-do-i-change-to-7-0-0-api" title="Permalink to this headline">¶</a></h2>
<p>To ease migration effort, PyTango 7 provides an alternative module called
PyTango3.</p>
<p>Changing your python import from:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">import</span> <span class="nn">PyTango</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">import</span> <span class="nn">PyTango3</span> <span class="k">as</span> <span class="nn">PyTango</span>
</pre></div>
</div>
<p>should allow you to execute your old PyTango code using the new PyTango 7 library.</p>
<p>Please note that you should as soon as possible migrate the code to Tango 7
since the PyTango team cannot assure the maintainability of the PyTango3 module.</p>
<p>Please find below a basic set of rules to migrate from PyTango 3.0.x to 7:</p>
<div class="section" id="general-rule-of-thumb-for-data-types">
<h3>General rule of thumb for data types<a class="headerlink" href="#general-rule-of-thumb-for-data-types" title="Permalink to this headline">¶</a></h3>
<p>The first important thing to be aware of when migrating from PyTango &lt;= 3.0.4 to
PyTango &gt;= 7 is that the data type mapping from tango to python and vice versa is
not always the same. The following table summarizes the differences:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="39%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tango data type</th>
<th class="head">PyTango 7 type</th>
<th class="head">PyTango &lt;= 3.0.4 type</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>DEV_VOID</td>
<td>No data</td>
<td>No data</td>
</tr>
<tr><td>DEV_BOOLEAN</td>
<td>bool</td>
<td>bool</td>
</tr>
<tr><td>DEV_SHORT</td>
<td>int</td>
<td>int</td>
</tr>
<tr><td>DEV_LONG</td>
<td>int</td>
<td>int</td>
</tr>
<tr><td>DEV_LONG64</td>
<td>long (on a 32 bits computer) or
int (on a 64 bits computer)</td>
<td>long (on a 32 bits computer) or
int (on a 64 bits computer)</td>
</tr>
<tr><td>DEV_FLOAT</td>
<td>float</td>
<td>float</td>
</tr>
<tr><td>DEV_DOUBLE</td>
<td>float</td>
<td>float</td>
</tr>
<tr><td>DEV_USHORT</td>
<td>int</td>
<td>int</td>
</tr>
<tr><td>DEV_ULONG</td>
<td>int</td>
<td>int</td>
</tr>
<tr><td>DEV_ULONG64</td>
<td>long (on a 32 bits computer) or
int (on a 64 bits computer)</td>
<td>long (on a 32 bits computer) or
int (on a 64 bits computer)</td>
</tr>
<tr><td>DEV_STRING</td>
<td>str</td>
<td>str</td>
</tr>
<tr><td>DEVVAR_CHARARRAY</td>
<td>sequence&lt;int&gt;</td>
<td>list&lt;int&gt;</td>
</tr>
<tr><td>DEVVAR_SHORTARRAY</td>
<td>sequence&lt;int&gt;</td>
<td>list&lt;int&gt;</td>
</tr>
<tr><td>DEVVAR_LONGARRAY</td>
<td>sequence&lt;int&gt;</td>
<td>list&lt;int&gt;</td>
</tr>
<tr><td>DEVVAR_LONG64ARRAY</td>
<td>sequence&lt;long&gt; (on a 32 bits computer) or
sequence&lt;int&gt; (on a 64 bits computer)</td>
<td>list&lt;long&gt; (on a 32 bits computer) or
list&lt;int&gt; (on a 64 bits computer)</td>
</tr>
<tr><td>DEVVAR_FLOATARRAY</td>
<td>sequence&lt;float&gt;</td>
<td>list&lt;float&gt;</td>
</tr>
<tr><td>DEVVAR_DOUBLEARRAY</td>
<td>sequence&lt;float&gt;</td>
<td>list&lt;float&gt;</td>
</tr>
<tr><td>DEVVAR_USHORTARRAY</td>
<td>sequence&lt;int&gt;</td>
<td>list&lt;int&gt;</td>
</tr>
<tr><td>DEVVAR_ULONGARRAY</td>
<td>sequence&lt;int&gt;</td>
<td>list&lt;int&gt;</td>
</tr>
<tr><td>DEVVAR_ULONG64ARRAY</td>
<td>sequence&lt;long&gt; (on a 32 bits computer) or
sequence&lt;int&gt; (on a 64 bits computer)</td>
<td>list&lt;long&gt; (on a 32 bits computer) or
list&lt;int&gt; (on a 64 bits computer)</td>
</tr>
<tr><td>DEVVAR_STRINGARRAY</td>
<td>sequence&lt;str&gt;</td>
<td>list&lt;str&gt;</td>
</tr>
<tr><td>DEVVAR_LONGSTRINGARRAY</td>
<td>A sequence with two elements:
1. sequence&lt;int&gt;
2. sequence&lt;str&gt;</td>
<td><dl class="first last docutils">
<dt>A list with two elements:</dt>
<dd><ol class="first last arabic simple">
<li>list&lt;int&gt;</li>
<li>list&lt;str&gt;</li>
</ol>
</dd>
</dl>
</td>
</tr>
<tr><td>DEVVAR_DOUBLESTRINGARRAY</td>
<td>A sequence with two elements:
1. sequence&lt;float&gt;
2. sequence&lt;str&gt;</td>
<td><dl class="first last docutils">
<dt>A list with two elements:</dt>
<dd><ol class="first last arabic simple">
<li>list&lt;float&gt;</li>
<li>list&lt;str&gt;</li>
</ol>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p>Note that starting from PyTango 7 you <strong>cannot assume anything</strong> about the concrete
sequence implementation for the tango array types in PyTango.
This means that the following code (valid in PyTango &lt;= 3.0.4):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">import</span> <span class="nn">PyTango</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">PyTango</span><span class="o">.</span><span class="n">DeviceProxy</span><span class="p">(</span><span class="s">&quot;my/device/experiment&quot;</span><span class="p">)</span>
<span class="n">da</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">read_attribute</span><span class="p">(</span><span class="s">&quot;array_attr&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;array_attr is NOT a scalar attribute&quot;</span>
</pre></div>
</div>
<p>must be replaced with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">import</span> <span class="nn">operator</span><span class="o">,</span> <span class="nn">types</span>
<span class="k">import</span> <span class="nn">PyTango</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">PyTango</span><span class="o">.</span><span class="n">DeviceProxy</span><span class="p">(</span><span class="s">&quot;my/device/experiment&quot;</span><span class="p">)</span>
<span class="n">da</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">read_attribute</span><span class="p">(</span><span class="s">&quot;array_attr&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">operator</span><span class="o">.</span><span class="n">isSequence</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">types</span><span class="o">.</span><span class="n">StringTypes</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;array_attr is NOT a scalar attribute&quot;</span>
</pre></div>
</div>
<p>Note that the above example is intended for demonstration purposes only. For
reference, the proper code would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">import</span> <span class="nn">PyTango</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">PyTango</span><span class="o">.</span><span class="n">DeviceProxy</span><span class="p">(</span><span class="s">&quot;my/device/experiment&quot;</span><span class="p">)</span>
<span class="n">da</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">read_attribute</span><span class="p">(</span><span class="s">&quot;array_attr&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">da</span><span class="o">.</span><span class="n">format</span> <span class="ow">is</span> <span class="n">PyTango</span><span class="o">.</span><span class="n">AttrDataFormat</span><span class="o">.</span><span class="n">SCALAR</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;array_attr is NOT a scalar attribute&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="server">
<h3>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">replace <cite>PyTango.PyUtil</cite> with <cite>PyTango.Util</cite></p>
</li>
<li><p class="first">replace <cite>PyTango.PyDeviceClass</cite> with <cite>PyTango.DeviceClass</cite></p>
</li>
<li><dl class="first docutils">
<dt>state and status overwrite</dt>
<dd><p class="first">in PyTango &lt;= 3.0.4, in order to overwrite the default state and status in a device
server, you had to reimplement <strong>State()</strong> and <strong>Status()</strong> methods respectively.</p>
<p class="last">in PyTango 7 the methods have been renamed to <strong>dev_state()</strong> and <strong>dev_status()</strong> in
order to match the C++ API.</p>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><dl class="first docutils">
<dt>AttributeValue does <strong>NOT</strong> exist anymore.</dt>
<dd><ul class="first simple">
<li>the result of a read_attribute call on a DeviceProxy/Group is now a DeviceAttribute object</li>
<li>write_attribute does not accept AttributeValue anymore</li>
</ul>
<p class="last">(See DeviceProxy API documentation for more details)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>command_inout for commands with parameter type DevVar****StringArray don&#8217;t accept items in second sequence not being strings:</dt>
<dd><p class="first">For example, a tango command &#8216;DevVoid Go(DevVarDoubleArray)&#8217; in tango 3.0.4
could be executed by calling:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dev_proxy</span><span class="o">.</span><span class="n">command_inout</span><span class="p">(</span> <span class="s">&#39;Go&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">]]</span> <span class="p">)</span>
</pre></div>
</div>
<p>and the second list would internally be converted to [&#8216;1&#8217;, &#8216;2&#8217;, &#8216;3&#8217;].
Starting from PyTango 7 this is not allowed anymore. So the above code
must be changed to:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">dev_proxy</span><span class="o">.</span><span class="n">command_inout</span><span class="p">(</span> <span class="s">&#39;Go&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">]]</span> <span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>PyTango.EventType enumeration constants changed to match C++ enumeration</dt>
<dd><ul class="first last simple">
<li>CHANGE -&gt; CHANGE_EVENT</li>
<li>QUALITY -&gt; QUALITY_EVENT</li>
<li>PERIODIC -&gt; PERIODIC_EVENT</li>
<li>ARCHIVE -&gt; ARCHIVE_EVENT</li>
<li>USER -&gt; USER_EVENT</li>
<li>ATTR_CONF_EVENT remains</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Exception handling</dt>
<dd><p class="first">in 3.0.4 DevFailed was a tuple of dictionaries. Now DevFailed is a tuple of DevError.
This means that code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">tango_fail</span><span class="p">()</span>
<span class="k">except</span> <span class="n">Tango</span><span class="o">.</span><span class="n">DevFailed</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mf">0</span><span class="p">][</span><span class="s">&#39;reason&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>needs to be replaced with:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">tango_fail</span><span class="p">()</span>
<span class="k">except</span> <span class="n">Tango</span><span class="o">.</span><span class="n">DevFailed</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">reason</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="optional">
<h3>Optional<a class="headerlink" href="#optional" title="Permalink to this headline">¶</a></h3>
<p>The following is a list of API improvements. Some where added for performance
reasons, others to allow for a more pythonic interface, others still to reflect
more adequately the C++ interface. They are not mandatory since the original
interface will still be available.</p>
<div class="section" id="server-side-v3-to-v4-upgrade">
<h4>Server side V3 to V4 upgrade<a class="headerlink" href="#server-side-v3-to-v4-upgrade" title="Permalink to this headline">¶</a></h4>
<p>If you want your server to support the V4 interface provided by Tango 7
instead of the V3 provided by Tango 6:</p>
<ul class="simple">
<li>replace the inheritance of your device class from <cite>PyTango.Device_3Impl</cite> to <cite>PyTango.Device_4Impl</cite></li>
<li>in the <cite>init_device</cite> method replace the call <cite>PyTango.Device_3Impl.init_device(self...</cite> with <cite>PyTango.Device_4Impl.init_device(self...</cite></li>
</ul>
</div>
<div class="section" id="improved-server-side-image-attribute-read-api">
<h4>Improved server side image attribute read API<a class="headerlink" href="#improved-server-side-image-attribute-read-api" title="Permalink to this headline">¶</a></h4>
<p>In PyTango &lt;= 3.0.4, to set the value of an image attribute you needed it
as a flat list. Consider you want to set as value the following image:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Image:</span>
<span class="c">#  | 1  2 |</span>
<span class="c">#  | 3  4 |</span>
</pre></div>
</div>
<p>In order to tell tango the dimensions of the image you had to specify them as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">]</span>
<span class="n">dim_x</span> <span class="o">=</span> <span class="mf">2</span>
<span class="n">dim_y</span> <span class="o">=</span> <span class="mf">2</span>
<span class="n">attr</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">dim_x</span><span class="p">,</span> <span class="n">dim_y</span><span class="p">)</span>
</pre></div>
</div>
<p>In PyTango7 it is still supported, but the preferred way is to use a
sequence of sequences (instead of a flat sequence), so the dimensions
are inherent and not needed anymore:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">]]</span>
<span class="n">attr</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>If you use a numpy array as the sequence of sequences you can get better
performance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">attr</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>Likewise, calls to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">PyTango</span><span class="o">.</span><span class="n">set_attribute_value_date_quality</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">quality</span><span class="p">,</span> <span class="n">dim_x</span><span class="p">,</span> <span class="n">dim_y</span><span class="p">)</span>
</pre></div>
</div>
<p>can be replaced with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">attr</span><span class="o">.</span><span class="n">set_value_date_quality</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">quality</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="improved-server-side-attribute-write-api">
<h4>Improved server side attribute write API<a class="headerlink" href="#improved-server-side-attribute-write-api" title="Permalink to this headline">¶</a></h4>
<p>Imagine the following value is written to our IMAGE attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Image:</span>
<span class="c">#  | 1  2 |</span>
<span class="c">#  | 3  4 |</span>
</pre></div>
</div>
<p>This is what you would do with PyTango &lt;= 3.0.4:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">flatList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">attr</span><span class="o">.</span><span class="n">get_write_value</span><span class="p">(</span><span class="n">flatList</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;flatList =&quot;</span><span class="p">,</span> <span class="n">flatList</span>
<span class="c"># flatList = [ 1, 2, 3, 4 ]</span>
</pre></div>
</div>
<p>You can still do it with PyTango7. However I recommend:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">get_write_value</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;image =&quot;</span><span class="p">,</span> <span class="n">image</span>
<span class="c"># image = numpy.array([[1, 2], [3, 4]])</span>
</pre></div>
</div>
<p>If PyTango7 is compiled without numpy support, you will get a sequence
of sequences, which makes more sense than a flat list.</p>
<p>If PyTango7 is compiled with numpy support it does not only makes more sense
but it is also considerably <strong>faster and memory friendlier</strong>.</p>
<p>If PyTango is compiled with numpy support but you prefer a list of lists for
some attribute, you can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">get_write_value</span><span class="p">(</span><span class="n">PyTango</span><span class="o">.</span><span class="n">ExtractAs</span><span class="o">.</span><span class="n">List</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;image =&quot;</span><span class="p">,</span> <span class="n">image</span>
<span class="c"># image = [[1, 2], [3, 4]]</span>
</pre></div>
</div>
<p>Also the SCALAR attribute case is much <strong>cleaner</strong> now. Instead of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">attr</span><span class="o">.</span><span class="n">get_write_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">actualData</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</pre></div>
</div>
<p>You can just write:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">actualData</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">get_write_value</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="why-is-there-a-wstrict-prototypes-warning-when-i-compile-pytango">
<h2>Why is there a &#8220;-Wstrict-prototypes&#8221; warning when I compile PyTango?<a class="headerlink" href="#why-is-there-a-wstrict-prototypes-warning-when-i-compile-pytango" title="Permalink to this headline">¶</a></h2>
<p>The PyTango prefered build system (distutils) uses the same flags used to compile
Python to compile PyTango. It happens that Python is compiled as a pure C library
while PyTango is a C++ library. Unfortunately one of the flags used by Python is
the &#8220;-Wstrict-prototypes&#8221; which makes sence in a C compilation but not in a C++
compilation.
For reference here is the complete error message you may have:</p>
<blockquote>
<cite>cc1plus: warning: command line option &#8220;-Wstrict-prototypes&#8221; is valid for Ada/C/ObjC but not for C++</cite></blockquote>
<p>Do not worry about this warning since the compiler is ignoring the presence of this flag
in the compilation.</p>
</div>
<div class="section" id="why-are-there-so-many-warnings-when-generating-the-documentation">
<h2>Why are there so many warnings when generating the documentation?<a class="headerlink" href="#why-are-there-so-many-warnings-when-generating-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>PyTango uses boost python for the binding between C++ and Python and sphinx for
document generation.
When sphinx generates the PyTango API documentation it uses introspection to search
for documentation in the python code. It happens that boost overrides some python
introspection API for functions and methods which sphinx expects to have. Therefore
you should see many warnings of type:</p>
<blockquote>
<cite>(WARNING/2) error while formatting signature for PyTango.Device_4Impl.always_executed_hook: **arg is not a Python function**</cite></blockquote>
<p>Do not worry since sphinx is able to generate the proper documentation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="exception.html" title="Exception Handling"
             >previous</a> |</li>
        <li><a href="index.html">PyTango v7.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, ALBA - CELLS.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>